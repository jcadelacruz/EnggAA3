<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>awesome engg</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
  
</head>

<body>
    <div id="parent">
        <div id="map">map</div>
        <div id="panel">
            panel
        </div>
    </div>
</body>
<style>
    div, body{
        margin:0;
        padding:0;
    }
 
   #parent{
        width: 100vw;
        display: flex;
        flex-direction: row;
        height: 100vh;
    }
    
    #map{
        width: 65vw;
        background-color: blue;
        position: relative;
    }
    .mapComponent{
        opacity: 0%;
        background-color: white;
        position: absolute;
    }
    
    #panel{
        width: 35vw;
        background-color: red;
    }
    .panelComponent{
        background-color: pink;
        border-style: solid;
        border-color: rgba(0, 0, 0, 50%);
        border-width: 0px 0px 1px 3px;
    }
    .panelDetails{
        display: none;
    }
</style>
<script>
    const allComps = [];
    class Component{
        constructor(n, w, h, l, t){
            allComps.push(this);
        
            this.name = n;
            
            let pc = document.createElement('div');
            pc.classList.add("panelComponent");
            document.getElementById("panel").appendChild(pc);
            pc.innerHTML = n;
            pc.addEventListener("mouseover", this.handleMouseover.bind(this));
            pc.addEventListener("mouseout", this.handleMouseout.bind(this));
            pc.addEventListener("click", this.handleClick.bind(this));
            this.panelComponent = pc;
            
            let pd = document.createElement('div');
            pd.classList.add("panelDetails");
            this.panelComponent.appendChild(pd);
            pd.innerHTML = "PANEL DETAILS OF " +n;
            this.panelDetails = pd;
            
            let mc = document.createElement('div');
            mc.classList.add("mapComponent");
            mc.style.width = w
            mc.style.height = h;
            mc.style.left = l;
            mc.style.top = t;
            document.getElementById("map").appendChild(mc);
            mc.innerHTML = n;
            mc.addEventListener("mouseover", this.handleMouseover.bind(this));
            mc.addEventListener("mouseout", this.handleMouseout.bind(this));
            this.mapComponent = mc;
            
            this.clicked = false;
        }
        handleClick(){
            allComps.forEach(this.unclick);
            this.clicked = true
            this.panelDetails.style.display = "block";
            this.highlight(85,false);
        }
        unclick(value, index, array){
            if(value.clicked){
                value.clicked = false;
                value.handleMouseout();
                
                value.panelDetails.style.display = "none";
            }
        }
        handleMouseover(){
            if(this.clicked){
            }
            else{
                this.highlight(70, true);
            }
        }
        handleMouseout(){
            if(this.clicked){
            }
            else{
                this.highlight(100, true);
            }
        }
        highlight(intensity, isReversed){
            this.panelComponent.style.opacity = intensity+"%";
            if(isReversed){
                this.mapComponent.style.opacity = (100-(intensity))+"%";
            }
            else{
                this.mapComponent.style.opacity = (intensity/2.2)+"%";
            }
        }
    }
    var brd = new Component("breindel", "50px", "150px", "50%", "50%");
    var sam = new Component("samuel", "10px", "10px", "0px", "20px");
    var ghe = new Component("gherson", "100px","60px", "10%", "10%");
</script>

</html>
